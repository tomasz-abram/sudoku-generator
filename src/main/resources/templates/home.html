<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Sudoku solver</title>

    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
          integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" rel="stylesheet">

    <link href="../static/css/main.css" rel="stylesheet" th:href="@{/css/main.css}"/>

</head>

<body>


<div class="container d-flex align-content-center justify-content-center">

    <div class="row">
        <div class="col">

            <div class="row align-content-center justify-content-center mt-3 p-0">
                <div class="col">
                    <div class="alert alert-success w-100" th:errors="*{sudokuBoardObject.board}"
                         th:if="${#fields.hasErrors('${sudokuBoardObject.board}')}"></div>
                    <ul class="list-unstyled">
                        <li class=" list-unstyled alert alert-danger"
                            th:each="err : ${#fields.errors('sudokuBoardObject.*')}"
                            th:text="${err}"/>
                    </ul>
                </div>
            </div>


            <div class="row align-content-center justify-content-center ">
                <div class="col-sm butl align-content-center justify-content-center p-0" id="printableArea">
                    <form action="#" class="p-0 m-0 butl" id="sudokuBoardObject" th:action="@{/solve-all}"
                          th:method="POST"
                          th:object="${sudokuBoardObject}">
                        <input th:type="hidden" id="boxesHeight" th:field="*{quantityBoxesHeight}">
                        <input th:type="hidden" id="boxesWidth" th:field="*{quantityBoxesWidth}">
                        <input th:type="hidden" id="size" th:field="*{sudokuSize}">

                        <table class=" m-3 d-flex align-content-center justify-content-center">
                            <tr th:each="row: *{board}">
                                <td class="p-0 m-0" th:each="item: ${row}">
                                    <div th:with="divRow=${rowStat.index % sudokuBoardObject.getQuantityBoxesWidth() == 0 && rowStat.index != 0}, divCol=${itemStat.index % sudokuBoardObject.getQuantityBoxesHeight() == 0 && itemStat.index != 0}">

                                        <input
                                                inputmode="numeric" maxlength="3"
                                                onfocus="value='' "
                                                th:class="${divCol}? (${divRow}? 'sudoku-cell1 form-control p-0 fs-5' : 'sudoku-cell2 form-control p-0 fs-5') : (${divRow}? 'sudoku-cell3 form-control p-0 fs-5' : 'sudoku-cell4 form-control p-0 fs-5')"
                                                th:field="*{board[__${rowStat.index}__][__${itemStat.index}__]}"
                                                th:if="${item == null || item == 0}"  th:value="*{board[__${rowStat.index}__][__${itemStat.index}__]}" type="text">

                                        <input
                                                inputmode="numeric"
                                                maxlength="3"
                                                th:class="${divCol}? (${divRow}? 'sudoku-cell1 form-control bg-warning p-0 fs-5' : 'sudoku-cell2 form-control bg-warning p-0 fs-5') : (${divRow}? 'sudoku-cell3 form-control bg-warning p-0 fs-5' : 'sudoku-cell4 form-control bg-warning p-0 fs-5')"
                                                th:field="*{board[__${rowStat.index}__][__${itemStat.index}__]}"
                                                th:if="${item > 0 && item <= sudokuBoardObject.sudokuSize}"

                                                type="text">

                                        <input
                                                inputmode="numeric"
                                                maxlength="3"
                                                th:class="${divCol}? (${divRow}? 'sudoku-cell1 form-control bg-danger p-0 fs-5' : 'sudoku-cell2 form-control bg-danger p-0 fs-5') : (${divRow}? 'sudoku-cell3 form-control bg-danger p-0 fs-5' : 'sudoku-cell4 form-control bg-danger p-0 fs-5')"
                                                th:field="*{board[__${rowStat.index}__][__${itemStat.index}__]}"
                                                th:if="${item > sudokuBoardObject.sudokuSize || item < 0 && item != null}"
                                                type="text">
                                    </div>
                                </td>
                            </tr>

                        </table>
                    </form>
                </div>
                <!--        ------------------------------------------------------------------------------------------------------------->
                <div class="col-sm text-center butl"
                     style="border-top-right-radius: 0.4rem; border-bottom-right-radius: 0.4rem">

                    <div class="w-100 mt-2 mb-2">
                        <h5> MENU </h5>
                        <hr class="m-auto">
                    </div>

                    <div class="mt-3">
                        <h6 style="letter-spacing: 11px">SOLVING</h6>
                        <div aria-label="Basic example" class="btn-group w-100" role="group">
                            <button class="btn btn-sm btn-dark but  border-left border-white text-white fs-6"
                                    type="button"> Solve cell
                            </button>
                            <button class="btn btn-sm btn btn-dark but border-right border-white text-white fs-6"
                                    form="sudokuBoardObject" type="submit"> Solve all
                            </button>

                        </div>
                    </div>

                    <div class="w-100 mt-3 text-center">
                        <h6 style="letter-spacing: 15px">PUZZLE</h6>
                        <div class="btn-group-vertical w-100">
                            <div aria-label="Basic example" class="btn-group w-100" role="group">

                                <button class="btn btn-sm btn-outline-dark fs-6 but text-white"
                                        style="width: 33% ; border-radius: 0.3rem 0 0 0" type="file">Load
                                </button>

                                <a class="btn btn-sm btn-outline-dark fs-6 but text-white" style="width: 33%"
                                        type="file" th:href="@{/save-file}">Save
                                </a>
                                <input class="btn btn-sm btn-outline-dark fs-6 but text-white"
                                       style="width: 33% ; border-radius: 0 0.3rem 0 0" th:onclick="printDiv('printableArea')"
                                       type="button" value="Print">

                            </div>

                            <div aria-label="Basic 2" class="btn-group w-100" role="group">
                                <button class="btn btn-sm btn-outline-dark but text-white fs-6" style="width: 33%"
                                        type="button">Seed
                                </button>

                                <form class="visually-hidden" id="clearSudokuBoard" th:action="@{/clear}"
                                      th:method="DELETE">
                                </form>
                                <button class="btn btn-sm btn-outline-dark but text-white fs-6" form="clearSudokuBoard"
                                        style="width: 33%" type="submit">Clear
                                </button>


                                <button class="btn btn-sm btn-dark but border-white text-white fs-6" style="width: 33%"
                                        type="button">Undo
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3">
                        <h6 style="letter-spacing: 10px">GENERATE</h6>

                        <div aria-label="Basic example" class="btn-group w-100 " role="group">
                            <button class="btn btn-sm btn-outline-dark but text-white fs-6" type="button">Easy</button>
                            <button class="btn btn-sm btn-outline-dark but text-white  fs-6" type="button">Medium
                            </button>
                            <button class="btn btn-sm btn-outline-dark but text-white fs-6" type="button">Hard</button>
                        </div>

                        <div class="mt-3 mb-3">
                            <h6 style="letter-spacing: 7px">BOARD SIZE</h6>

                            <div class="btn-group w-100">
                                <form class="btn-group w-100" th:action="@{/change-board-size}" th:method="PUT">
                                    <label class="btn btn-sm btn-outline-dark but text-white fs-6 but border-white"
                                           for="changeBoardSize"
                                           th:text="${sudokuBoardObject.sudokuSize + ' x ' + sudokuBoardObject.sudokuSize}">Options</label>
                                    <select class="btn btn-sm btn-outline-dark but text-white fs-6 m-0 p-0"
                                            id="changeBoardSize" name="changeBoardSize">
                                        <option selected>Choose</option>
                                        <option th:value="4">4x4</option>
                                        <option th:value="6">6x6</option>
                                        <option th:value="8">8x8</option>
                                        <option th:value="9">9x9</option>
                                        <option th:value="10">10x10</option>
                                        <option th:value="12">12x12</option>
                                        <option th:value="14">14x14</option>
                                        <option th:value="15">15x15</option>
                                        <option th:value="16">16x16</option>
                                        <option th:value="18">18x18</option>

                                    </select>
                                    <button class="btn btn-sm btn-dark but text-white fs-6" type="submit">Change
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

<!--                    <div id="spinner" class="d-flex justify-content-center">-->
<!--                        <div class="spinner-border " role="status">-->
<!--                            <span class="visually-hidden">Loading...</span>-->
<!--                        </div>-->
<!--                    </div>-->

                </div>
            </div>
        </div>
    </div>
</div>

</body>

</html>
<script>
    function printDiv(divName) {
        var printContents = document.getElementById(divName).innerHTML;
        var originalContents = document.body.innerHTML;
        document.body.innerHTML = printContents;
        window.print();
        document.body.innerHTML = originalContents;
    }
</script>